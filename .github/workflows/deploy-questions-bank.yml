name: "ğŸ§¹ Clean Deploy (Manual, FTPS)"

on:
  workflow_dispatch: {}   # ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ ÙÙ‚Ø·

concurrency:
  group: clean-deploy
  cancel-in-progress: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Deploy via FTPS (Explicit 21) - CLEAN & REDEPLOY
        uses: SamKirkland/FTP-Deploy-Action@v4.3.6
        with:
          # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
          server:   ${{ secrets.FTP_HOST }}        # Ù…Ø«Ø§Ù„: ftp.yourdomain.com
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          protocol: ftps                            # FTPS Explicit
          port: 21

          # Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø´Ø±
          local-dir: ./
          # Ø§Ø¬Ø¹Ù„Ù‡ "Ù†Ø³Ø¨ÙŠ" Ù„Ø¬Ø°Ø± FTP Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Ø¨Ø¯ÙˆÙ† / ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
          server-dir: public_html/questions-bank/

          # Ø§Ù…Ø³Ø­ ÙƒÙ„ Ø´ÙŠØ¡ Ø¯Ø§Ø®Ù„ server-dir Ù‚Ø¨Ù„ Ø§Ù„Ø±ÙØ¹
          dangerous-clean-slate: true

          # Ù„Ø§ ØªØ±ÙØ¹ Ù…Ù„ÙØ§Øª Git Ø£Ùˆ Ù…Ù„ÙØ§Øª Ù„Ø§ Ù†Ø­ØªØ§Ø¬Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
          exclude: |
            **/.git*
            **/.git*/**
            **/.github/**
            **/.DS_Store
            **/node_modules/**
            .well-known/**            # Ø§ØªØ±ÙƒÙ‡ Ø£Ùˆ Ø§Ø­Ø°ÙÙ‡ Ø­Ø³Ø¨ Ø­Ø§Ø¬ØªÙƒ
            .ftp-deploy-sync-state.json

          # Ø³Ø¬Ù„ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ
          log-level: verbose
